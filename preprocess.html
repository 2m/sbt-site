<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
<title>Preprocessing · sbt-site</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content='sbt-site'/>
<link href="https://fonts.googleapis.com/css?family=Roboto:100normal,100italic,300normal,300italic,400normal,400italic,500normal,500italic,700normal,700italic,900normal,900italicc" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="lib/jquery/jquery.min.js"></script>
<script type="text/javascript" src="js/page.js"></script>
<link rel="stylesheet" type="text/css" href="lib/normalize.css/normalize.css"/>
<link rel="stylesheet" type="text/css" href="lib/foundation/dist/foundation.min.css"/>
<link rel="stylesheet" type="text/css" href="css/page.css"/>

<!--
<link rel="shortcut icon" href="images/favicon.ico" />
-->
</head>

<body>
<div class="off-canvas-wrapper">
<div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

<div class="off-canvas position-left" id="off-canvas-menu" data-off-canvas>
<nav class="off-canvas-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>sbt-site
</a>
<div class="version-number">
1.3.0
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="getting-started.html">Getting Started</a></li>
  <li><a href="preprocess.html" class="active">Preprocessing</a></li>
  <li><a href="api-documentation.html">API documentation</a></li>
  <li><a href="generators/index.html">Site Generators</a>
  <ul>
    <li><a href="generators/asciidoctor.html">Asciidoctor</a></li>
    <li><a href="generators/gitbook.html">GitBook</a></li>
    <li><a href="generators/hugo.html">Hugo</a></li>
    <li><a href="generators/jekyll.html">Jekyll</a></li>
    <li><a href="generators/laika.html">Laika</a></li>
    <li><a href="generators/nanoc.html">Nanoc</a></li>
    <li><a href="generators/pamflet.html">Pamflet</a></li>
    <li><a href="generators/paradox.html">Paradox</a></li>
    <li><a href="generators/sphinx.html">Sphinx</a></li>
  </ul></li>
  <li><a href="publishing.html">Publishing</a></li>
  <li><a href="advanced-usage.html">Advanced Usage</a></li>
  <li><a href="migration-guide.html">Migration Guide</a></li>
</ul>
</div>

</nav>
</div>

<div class="off-canvas-content" data-off-canvas-content>

<header class="site-header expanded row">
<div class="small-12 column">
<a href="#" class="off-canvas-toggle hide-for-medium" data-toggle="off-canvas-menu"><svg class="svg-icon svg-icon-menu" version="1.1" id="Menu" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"> <path class="svg-icon-menu-path" fill="#53CDEC" d="M16.4,9H3.6C3.048,9,3,9.447,3,10c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,9.447,16.952,9,16.4,9z M16.4,13
H3.6C3.048,13,3,13.447,3,14c0,0.553,0.048,1,0.6,1H16.4c0.552,0,0.6-0.447,0.6-1C17,13.447,16.952,13,16.4,13z M3.6,7H16.4
C16.952,7,17,6.553,17,6c0-0.553-0.048-1-0.6-1H3.6C3.048,5,3,5.447,3,6C3,6.553,3.048,7,3.6,7z"/></svg>
</a>
<div class="title"><a href="index.html">sbt-site</a></div>

<!--
<a href="https://www.example.com" class="logo show-for-medium">logo</a>
-->
</div>
</header>

<div class="expanded row">

<div class="medium-3 large-2 show-for-medium column">
<nav class="site-nav">
<div class="nav-home">
<a href="index.html" >
<span class="home-icon">⌂</span>sbt-site
</a>
<div class="version-number">
1.3.0
</div>
</div>
<div class="nav-toc">
<ul>
  <li><a href="getting-started.html">Getting Started</a></li>
  <li><a href="preprocess.html" class="active">Preprocessing</a></li>
  <li><a href="api-documentation.html">API documentation</a></li>
  <li><a href="generators/index.html">Site Generators</a>
  <ul>
    <li><a href="generators/asciidoctor.html">Asciidoctor</a></li>
    <li><a href="generators/gitbook.html">GitBook</a></li>
    <li><a href="generators/hugo.html">Hugo</a></li>
    <li><a href="generators/jekyll.html">Jekyll</a></li>
    <li><a href="generators/laika.html">Laika</a></li>
    <li><a href="generators/nanoc.html">Nanoc</a></li>
    <li><a href="generators/pamflet.html">Pamflet</a></li>
    <li><a href="generators/paradox.html">Paradox</a></li>
    <li><a href="generators/sphinx.html">Sphinx</a></li>
  </ul></li>
  <li><a href="publishing.html">Publishing</a></li>
  <li><a href="advanced-usage.html">Advanced Usage</a></li>
  <li><a href="migration-guide.html">Migration Guide</a></li>
</ul>
</div>

</nav>
</div>

<div class="small-12 medium-9 large-10 column">
<section class="site-content">

<div class="page-header row">
<div class="medium-12 show-for-medium column">
<div class="nav-breadcrumbs">
<ul>
  <li><a href="index.html">sbt-site</a></li>
  <li>Preprocessing</li>
</ul>
</div>
</div>
</div>

<div class="page-content row">
<div class="small-12 large-9 column" id="docs">
<h1><a href="#preprocessing" name="preprocessing" class="anchor"><span class="anchor-link"></span></a>Preprocessing</h1>
<p>sbt-site supports basic variable substitution via the <code>PreprocessPlugin</code> if for example you need to replace a version string in a source file or a generated HTML file. More advanced preprocessing, such as interpreting code snippets with <a href="https://github.com/tpolecat/tut">tut</a>, is possible via additional configuration as shown below.</p>
<h2><a href="#variable-substitution" name="variable-substitution" class="anchor"><span class="anchor-link"></span></a>Variable Substitution</h2>
<p>The <code>PreprocessPlugin</code> reads files from an input directory, substitute variables and writes them to an output directory. In addition to preprocessing static content it is also possible to use the plugin either before or after invoking a <a href="generators/index.html">site generator</a>. To enable, add this to your <code>build.sbt</code> file:</p>
<pre class="prettyprint"><code class="language-sbt">enablePlugins(PreprocessPlugin)</code></pre>
<p>By default files are read from <code>src/site-preprocess</code> but this is configurable by setting <code>sourceDirectory</code>:</p>
<pre class="prettyprint"><code class="language-sbt">sourceDirectory in Preprocess := sourceDirectory.value / &quot;site-preprocess&quot;</code></pre>
<p>Variables are delimited by surrounding the name with <code>@</code> symbols (e.g. <code>@VERSION@</code>). Values are assigned to variables via the setting <code>preprocessVars: [Map[String, String]]</code>. For example:</p>
<pre class="prettyprint"><code class="language-sbt">preprocessVars in Preprocess := Map(&quot;VERSION&quot; -&gt; version.value, &quot;DATE&quot; -&gt; new Date().toString)</code></pre><div class="callout note "><div class="callout-title">Note</div>
<p>The plugin will generate an error if a variable is found in the source file with no matching value in <code>preprocessVars</code>.</p></div>
<p>The setting <code>preprocessIncludeFilter</code> is used to define the filename extensions that should be processed when <code>makeSite</code> is run.</p>
<pre class="prettyprint"><code class="language-sbt">preprocessIncludeFilter := &quot;*.md&quot; | &quot;*.markdown&quot;</code></pre>
<p>The default filter is:</p>
<pre class="prettyprint"><code class="language-scala">&quot;*.txt&quot; | &quot;*.html&quot; | &quot;*.md&quot; | &quot;*.rst&quot;</code></pre>
<h2><a href="#preprocessing-markdown-files-with-tut" name="preprocessing-markdown-files-with-tut" class="anchor"><span class="anchor-link"></span></a>Preprocessing Markdown files with tut</h2>
<p>The <a href="https://github.com/tpolecat/tut">tut</a> sbt plugin allows you to write documentation with fenced code blocks that is typechecked and run as part of your build. For example this markdown snippet:</p>
<pre class="prettyprint"><code class="language-md">Here is how you add numbers:

```tut
1 + 1
```</code></pre>
<p>Will show the result of running the code in the Scala REPL:</p>
<pre><code>Here is how you add numbers:

```scala
scala&gt; 1 + 1
res0: Int = 2    
```
</code></pre>
<p>The following example shows how to use it to preprocess a collection of markdown files before running a site generator.</p>
<pre class="prettyprint"><code class="language-sbt">enablePlugins(ParadoxSitePlugin, TutPlugin)
sourceDirectory in Paradox := tutTargetDirectory.value
makeSite := makeSite.dependsOn(tut).value</code></pre>
<p>The example uses the Paradox site generator but can be adapted to any site generator which understands markdown by configuring its <code>sourceDirectory</code> accordingly. For Jekyll, this would be:</p>
<pre class="prettyprint"><code class="language-sbt">sourceDirectory in Jekyll := tutTargetDirectory.value
</code></pre>
<div class="source-github">
The source code for this page can be found <a href="https://github.com/sbt/sbt-site/tree/master/src/main/paradox/preprocess.md">here</a>.
</div>

<div class="nav-next">
<p><strong>Next:</strong> <a href="api-documentation.html">API documentation</a></p>
</div>
</div>
<div class="large-3 show-for-large column" data-sticky-container>
<nav class="sidebar sticky" data-sticky data-anchor="docs" data-sticky-on="large">
<div class="page-nav">
<div class="nav-title">On this page:</div>
<div class="nav-toc">
<ul>
  <li><a href="preprocess.html#preprocessing">Preprocessing</a>
  <ul>
    <li><a href="preprocess.html#variable-substitution">Variable Substitution</a></li>
    <li><a href="preprocess.html#preprocessing-markdown-files-with-tut">Preprocessing Markdown files with tut</a></li>
  </ul></li>
</ul>
</div>
</div>
</nav>
</div>
</div>

</section>
</div>

</div>

<footer class="site-footer">

<section class="site-footer-nav">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 medium-4 large-3 text-center column">
<div class="nav-links">
<ul>
<!-- <li><a href="https://www.example.com/products/">Products</a> -->
</ul>
</div>
</div>

</div>
</div>
</div>
</section>

<section class="site-footer-base">
<div class="expanded row">
<div class="small-12 large-offset-2 large-10 column">
<div class="row site-footer-content">

<div class="small-12 text-center large-9 column">

<!--
<div class="copyright">
<span class="text">&copy; 2017</span>
<a href="https://www.example.com" class="logo">logo</a>
</div>
-->
</div>

</div>
</div>
</div>
</section>
</footer>

</div>
</div>
</div>
</body>

<script type="text/javascript" src="lib/foundation/dist/foundation.min.js"></script>
<script type="text/javascript">jQuery(document).foundation();</script>
<script type="text/javascript" src="js/magellan.js"></script>

<style type="text/css">@import "lib/prettify/prettify.css";</style>
<script type="text/javascript" src="lib/prettify/prettify.js"></script>
<script type="text/javascript" src="lib/prettify/lang-scala.js"></script>
<script type="text/javascript">jQuery(function(){window.prettyPrint && prettyPrint()});</script>

</html>
